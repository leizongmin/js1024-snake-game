(()=>{var t=30,e=30,n=~~(a.width/t)*t,o=~~(a.height/e)*e,i=~~(n/t),l=~~(o/e),f={97:{x:-1,y:0,o:100},115:{x:0,y:1,o:119},100:{x:1,y:0,o:97},119:{x:0,y:-1,o:115}};let y,x,r;function s(n,o){c.strokeStyle="#fff",c.strokeRect(n.x*t,n.y*e,t,e),c.fillStyle=o||"#aaa",c.fillRect(n.x*t,n.y*e,t,e)}function d(){var t={x:~~(Math.random()*i),y:~~(Math.random()*l)};return y.some(e=>t.x===e.x&&t.y===e.y)?d():t}function h(){y=[{x:~~(i/2),y:~~(l/2),d:119}],x=d(),u()}function u(){var t=function(t){var e=f[t.d];return{x:t.x+e.x,y:t.y+e.y,d:t.d}}(y[0]);if(!(t.x>=0&&t.x<i&&t.y>=0&&t.y<l))return c.fillStyle="#e96900",c.font="bold 48px serif",c.fillText("Game Over",(n-96)/2,(o-24)/2),void setTimeout(h,2e3);y.unshift(t),x.x===t.x&&x.y===t.y?x=d():y.pop(),c.fillStyle="#f1fedd",c.fillRect(0,0,n,o),s(x,"#e96900"),s(y[0],"#2d64b3"),y.slice(1).forEach(t=>s(t)),r=setTimeout(u,150-1.5*y.length)}addEventListener("keypress",t=>{32==t.which&&(r?(clearTimeout(r),r=null):u());var e=f[t.which];if(e){var c=y[0];if(y.length>1&&e.o===c.d)return;c.d=t.which}}),h()})();